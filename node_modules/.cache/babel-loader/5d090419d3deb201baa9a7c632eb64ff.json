{"ast":null,"code":"/**\n * request.js\n *\n * Request class contains server only options\n */\n\nvar parse_url = require('url').parse;\nvar Headers = require('./headers');\nvar Body = require('./body');\nmodule.exports = Request;\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nfunction Request(input, init) {\n  var url, url_parsed;\n\n  // normalize input\n  if (!(input instanceof Request)) {\n    url = input;\n    url_parsed = parse_url(url);\n    input = {};\n  } else {\n    url = input.url;\n    url_parsed = parse_url(url);\n  }\n\n  // normalize init\n  init = init || {};\n\n  // fetch spec options\n  this.method = init.method || input.method || 'GET';\n  this.redirect = init.redirect || input.redirect || 'follow';\n  this.headers = new Headers(init.headers || input.headers || {});\n  this.url = url;\n\n  // server only options\n  this.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n  this.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n  this.counter = init.counter || input.counter || 0;\n  this.agent = init.agent || input.agent;\n  Body.call(this, init.body || this._clone(input), {\n    timeout: init.timeout || input.timeout || 0,\n    size: init.size || input.size || 0\n  });\n\n  // server request options\n  this.protocol = url_parsed.protocol;\n  this.hostname = url_parsed.hostname;\n  this.port = url_parsed.port;\n  this.path = url_parsed.path;\n  this.auth = url_parsed.auth;\n}\nRequest.prototype = Object.create(Body.prototype);\n\n/**\n * Clone this request\n *\n * @return  Request\n */\nRequest.prototype.clone = function () {\n  return new Request(this);\n};","map":null,"metadata":{},"sourceType":"script"}